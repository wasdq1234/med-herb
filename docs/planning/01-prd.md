# PRD (제품 요구사항 정의서)

> 이 문서는 비기술자의 언어로 쉽고 비유적으로 작성합니다.

---

## MVP 캡슐

| # | 항목 | 내용 |
|---|------|------|
| 1 | 목표 | 사용자 증상 입력 → 한의학적 변증 도출 → 치료법/약재 정보 제공 |
| 2 | 페르소나 | 건강에 관심 있는 30-50대 일반인 |
| 3 | 핵심 기능 | FEAT-1: 증상 진단 설문 → 변증 결과 → 치료축/약재 추천 |
| 4 | 성공 지표 (노스스타) | 진단 완료율 (설문 시작 → 결과 확인까지 완료한 비율) |
| 5 | 입력 지표 | 일일 진단 시작 수, 결과 페이지 체류 시간 |
| 6 | 비기능 요구 | 진단 결과 산출 3초 이내, 관리자 인증 보안 |
| 7 | Out-of-scope | 모바일 앱, 소셜 로그인, 결제 시스템 |
| 8 | Top 리스크 | 진단 로직/데이터가 클라이언트로부터 늦게 전달될 경우 |
| 9 | 완화/실험 | 샘플 데이터로 먼저 개발, 로직 인터페이스 추상화 |
| 10 | 다음 단계 | 샘플 질문/변증/약재 데이터로 프로토타입 구현 |

---

## 1. 문제 정의

### 1.1 현재 상황 (As-Is)
일반인이 한의학 정보에 접근하기 어렵습니다. 마치 외국어로 된 의학 서적을 펼쳐놓고 자신의 증상을 찾으려는 것과 같습니다. "기허", "담음", "어혈" 같은 용어는 전문가만 이해할 수 있고, 어떤 증상이 어떤 체질과 연결되는지 알기 어렵습니다.

### 1.2 목표 상황 (To-Be)
사용자가 간단한 설문에 답하면, 자신의 증상에 해당하는 한의학적 변증(체질 경향)을 알 수 있습니다. 마치 친절한 한의사가 "당신은 이런 경향이 있으시네요. 이런 약재가 도움이 될 수 있어요"라고 설명해주는 것처럼, 쉬운 말로 결과를 보여줍니다.

### 1.3 왜 지금인가? (Why Now)
시장 검증을 위한 MVP 프로젝트입니다. 한의학에 대한 일반인의 관심은 높아지고 있지만, 접근하기 쉬운 자가진단 서비스가 부족합니다. 이 서비스가 실제로 가치를 제공하는지 빠르게 검증하고자 합니다.

---

## 2. 사용자 페르소나

### 2.1 주요 페르소나

| 항목 | 내용 |
|------|------|
| 이름/별칭 | "건강 걱정하는 민수" |
| 나이/직업 | 42세 사무직 직장인 |
| 핵심 니즈 | 몸이 안 좋을 때 한의학적으로 어떤 상태인지 알고 싶음 |
| 불편 포인트 | 한의학 용어가 어려움, 기존 서비스는 질문이 너무 많음 |
| 사용 상황 | 몸이 안 좋을 때, 집에서 PC로 검색하다가 사용 |

### 2.2 페르소나의 하루 (시나리오)
민수는 요즘 자주 피곤하고 소화가 잘 안 됩니다. 병원에 가자니 시간이 없고, 그냥 넘기자니 걱정됩니다. 퇴근 후 집에서 "피로 한방" 검색을 하다가 "한방진단" 서비스를 발견합니다.

"5분이면 된다고? 해볼까." 민수는 두통, 소화불량 등 증상을 체크하고, 10개 정도의 간단한 질문에 답합니다. 결과 화면에서 "기허 경향"이라는 진단과 함께, "왜 이렇게 나왔는지" 근거가 보입니다. "아, 그래서 내가 피곤했구나." 추천 약재 목록과 문헌 근거까지 확인한 민수는 다음에 한의원 갈 때 참고해야겠다고 생각합니다.

---

## 3. 사용자 스토리

### FEAT-0: 공통 흐름 (관리자)
- [ ] 관리자로서, 로그인하여 관리 페이지에 접근할 수 있어야 한다. 왜냐하면 진단 로직과 데이터를 안전하게 관리해야 하기 때문이다.
- [ ] 관리자로서, 질문/변증/약재 데이터를 수정할 수 있어야 한다. 왜냐하면 전문가 검토 후 데이터를 업데이트해야 하기 때문이다.

### FEAT-1: 증상 진단 설문 (MVP 핵심)
- [ ] 사용자로서, 증상을 체크박스로 선택할 수 있어야 한다. 왜냐하면 빠르게 자신의 상태를 입력하고 싶기 때문이다.
- [ ] 사용자로서, 10~15개의 상황 질문에 답할 수 있어야 한다. 왜냐하면 정확한 진단을 위해 추가 정보가 필요하기 때문이다.
- [ ] 사용자로서, 질문이 너무 많지 않아야 한다. 왜냐하면 중간에 포기하지 않고 끝까지 완료하고 싶기 때문이다.

### FEAT-2: 변증 후보 결과
- [ ] 사용자로서, 내 증상에 해당하는 변증 후보 3개를 볼 수 있어야 한다. 왜냐하면 하나의 답이 아닌 가능성을 알고 싶기 때문이다.
- [ ] 사용자로서, 왜 이런 결과가 나왔는지 근거를 볼 수 있어야 한다. 왜냐하면 결과를 신뢰하려면 이유가 필요하기 때문이다.

### FEAT-3: 치료축/약재 추천
- [ ] 사용자로서, 공통 치료 접근 축 3개를 볼 수 있어야 한다. 왜냐하면 어떤 방향으로 관리해야 하는지 알고 싶기 때문이다.
- [ ] 사용자로서, 추천 약재 5개를 표로 볼 수 있어야 한다. 왜냐하면 구체적인 정보가 필요하기 때문이다.
- [ ] 사용자로서, 각 추천의 문헌 근거를 확인할 수 있어야 한다. 왜냐하면 신뢰할 수 있는 정보인지 검증하고 싶기 때문이다.

---

## 4. 성공 지표

### 4.1 노스스타 지표 (결과 지표)
| 지표명 | 정의 | 목표치 | 측정 주기 |
|--------|------|--------|----------|
| 진단 완료율 | 설문 시작 후 결과 페이지까지 도달한 비율 | 70% 이상 | 주간 |

### 4.2 입력 지표 (행동 지표)
| 지표명 | 정의 | 목표치 |
|--------|------|--------|
| 일일 진단 시작 수 | 하루 동안 설문을 시작한 사용자 수 | 측정 시작 |
| 결과 페이지 체류 시간 | 결과 화면에서 머문 평균 시간 | 2분 이상 |

---

## 5. 범위 관리

### 5.1 MVP (반드시 포함)
- FEAT-1: 증상 입력 설문 (체크박스 + 상황질문 10~15개)
- FEAT-2: 변증 후보 결과 화면 (3개 카드 + 근거)
- FEAT-3: 치료축/약재 추천 화면 (치료축 3개 + 약재 5개 + 근거 링크)
- FEAT-0: 관리자 로그인 및 데이터 관리

### 5.2 옵션 (시간 허용 시)
- 진단 결과 PDF 다운로드
- 이전 진단 결과 조회 (비회원도 가능하게)

### 5.3 Non-goals (명시적 제외)
- 모바일 앱 또는 반응형 웹 (PC 전용)
- 사용자 회원가입/로그인 (관리자만 로그인)
- 소셜 로그인 연동
- 결제 시스템
- 한의원/약국 연계 기능

---

## 6. 가정과 리스크

### 6.1 핵심 가정
| # | 가정 | 검증 방법 |
|---|------|----------|
| 1 | 10~15개 질문으로 의미 있는 변증 도출이 가능하다 | 전문가 검토 + 사용자 피드백 |
| 2 | 사용자는 한의학 정보에 관심이 있다 | 진단 시작 수 및 완료율 측정 |
| 3 | 클라이언트가 진단 로직을 제때 제공할 것이다 | 샘플 데이터로 먼저 개발 |

### 6.2 Top 5 리스크 보드

| # | 가정 | 리스크 | 완화 | 트리거 | 대응 |
|---|------|--------|------|--------|------|
| 1 | 로직 제공 | 진단 로직/데이터 전달 지연 | 샘플 데이터로 먼저 개발, 인터페이스 추상화 | 개발 시작 후 1주 내 미전달 | 클라이언트와 일정 재협의 |
| 2 | 질문 수 | 10~15개로도 사용자가 많다고 느낌 | 진행률 표시, 예상 시간 안내 | 완료율 50% 미만 | 질문 수 축소 검토 |
| 3 | 결과 신뢰 | 사용자가 결과를 신뢰하지 않음 | 문헌 근거 명시, 전문가 감수 표시 | 결과 페이지 이탈률 높음 | 근거 강화, 전문가 코멘트 추가 |
| 4 | 기술 | Cloudflare D1 성능 한계 | 캐싱 전략, 쿼리 최적화 | 응답 시간 3초 초과 | 데이터 구조 최적화 |
| 5 | 보안 | 관리자 페이지 무단 접근 | 강력한 인증, HTTPS | 보안 감사 시 | 인증 강화 |

---

## 7. 해결 가설과 실험

### 7.1 가설
> 만약 사용자에게 간결한 설문(10~15문항)을 제공하고 신뢰할 수 있는 근거와 함께 결과를 보여주면, 70% 이상이 끝까지 완료할 것이다. 왜냐하면 기존 서비스의 가장 큰 문제가 "질문이 너무 많음"과 "결과가 모호함"이었기 때문이다.

### 7.2 실험 루프

```
실험 → 관측 → 학습 → 다음 가설
```

| 단계 | 내용 |
|------|------|
| 실험 | MVP 출시 후 2주간 사용자 행동 관찰 |
| 관측 | 진단 완료율, 각 단계별 이탈률, 결과 페이지 체류 시간 |
| 학습 | 완료율 70% 이상이면 성공, 미만이면 원인 분석 |
| 다음 | 이탈 지점 파악 후 해당 단계 UX 개선 |

---

## Decision Log 참조

| ID | 항목 | 선택 | 근거 | 영향 | 보류안 |
|----|------|------|------|------|--------|
| D-01 | 프로젝트명 | 한방진단 | 직관적이고 명확한 네이밍 | 모든 문서/UI에서 사용 | 변증나침반, 체질진단 |
| D-02 | 타겟 | 30-50대 일반인 | 건강 관심 높은 연령대 | 페르소나 및 톤앤매너 결정 | 한의원 내원 환자 |
| D-03 | MVP 핵심 | 전체 흐름 (4기능) | 진단 서비스는 흐름이 완결되어야 가치 | 4개 기능 모두 MVP 포함 | 단계별 출시 |
| D-04 | 안티패턴 | 질문 많으면 안됨 | 사용자 피드백 반영 | 질문 수 10~15개로 제한 | - |
| D-05 | UI톤 | 신뢰감 + 깔끔함 | 의료 서비스 특성 | 디자인 시스템에 반영 | 친근한 톤 |
| D-06 | 데이터관리 | DB + 관리자페이지 | 로직 수정 필요성 | 관리자 기능 MVP 포함 | JSON 파일 |
| D-07 | 기술스택 | Cloudflare 풀스택 | Pages 배포 희망, 서버리스 | Workers + D1 + Pages | FastAPI + PostgreSQL |
